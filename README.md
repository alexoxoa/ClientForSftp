# SFTP Client на Java

## Описание
Этот проект представляет собой Java-клиент для работы с SFTP-сервером. Он позволяет загружать, скачивать и обновлять файлы на сервере с использованием библиотеки **net.schmizz.sshj**. Клиент взаимодействует с JSON-файлом, содержащим список доменов и IP-адресов, предоставляя возможность его редактирования и обновления.

## Функциональность
- Подключение к SFTP-серверу с использованием имени пользователя и пароля.
- Чтение JSON-файла с сервера.
- Добавление новой записи (домен + IP-адрес) в JSON-файл.
- Удаление записи (домен + IP-адрес) из JSON-файла.
- Поиск записи по домену либо по IP-адресу.
- Загрузка обновленного JSON-файла обратно на сервер.
- Логирование работы клиента.
- Тестирование SFTP Client.

## Требования
- **Java 8+**
- **Maven** (если используется для управления зависимостями)
- **OpenSSH Server** (если сервер разворачивается локально)
- **Библиотека net.schmizz.sshj** (используется для работы с SFTP)
- **Библиотека javax.json** (для обработки JSON)

## Установка и настройка
### 1. Настройка SFTP-сервера (локально)
Если сервер SFTP разворачивается на локальной машине:
1. Установите **OpenSSH Server** (для Windows):
   ```powershell
   Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0
   ```
2. Запустите службу:
   ```powershell
   Start-Service sshd
   ```
3. Проверьте, что сервер работает:
   ```powershell
   Get-Service sshd
   ```
4. Создайте пользователя для работы с SFTP (`user`).
5. Убедитесь, что у пользователя есть доступ к нужной папке.

### 2. Сборка проекта
1. Склонируйте репозиторий.
2. Перейдите в папку проекта:
   ```sh
   cd 
   ```
3. Соберите проект с помощью Maven:
   ```sh
   mvn clean install
   ```

### 3. Запуск клиента
Запустите клиент через командную строку или в среде разработки.


## Конфигурация
Конфигурация соединения при подключении задаётся в виде косольного пользовательского ввода. В коде необходимо указать только:
```
String remoteFilePath = "/domains.json"; // Путь к JSON-файлу
```

Конфигурация соединения при тестировании польностью задаётся в коде:
```java
String sftpHost = "127.0.0.1"; // IP-адрес сервера
int sftpPort = 22; // Порт подключения
String sftpUser = "user"; // Имя пользователя
String sftpPassword = "password"; // Пароль
String remoteFilePath = "/domains.json"; // Путь к JSON-файлу
```

## Формат JSON-файла
Файл `domains.json` хранит список доменов и их IP-адресов в следующем формате:
```json
{
  "addresses": [
    {
      "domain": "domain",
      "ip": "173.158.0.1"
    },
    {
      "domain": "sec.domain",
      "ip": "142.167.0.2"
    }
  ]
}
```


